<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
        
<hibernate-mapping>

    <class name="edu.emory.library.tas.attrGroups.Attribute" table="attributes">
    	<cache usage="read-write" />
    	
        <id name="id" column="iid">
        	<generator class="native"/>
        </id>                       
        
		<many-to-one name="objectType" column="r_object_type_id" 
		             class="edu.emory.library.tas.attrGroups.ObjectType" 
					 unique="true" lazy="false"/>
		
		<property name="name" column="attr_name"/>		
		<property name="userLabel" column="user_label"/>
		<property name="type" column="attr_type"/>
		<property name="dictionary" column="attr_dictionary"/>
		<property name="description" column="attr_description"/>
		<property name="length" column="attr_length"/>
		<property name="importType" column="attr_import_type"/>		
		<property name="importName" column="attr_import_name"/>
		<property name="importDateDay" column="attr_import_date_day"/>
		<property name="importDateMonth" column="attr_import_date_month"/>
		<property name="importDateYear" column="attr_import_date_year"/>
					
	</class>
	
	<class name="edu.emory.library.tas.attrGroups.CompoundAttribute" table="compound_attributes">
		<cache usage="read-write" />
		
        <id name="id" column="iid">
        	<generator class="native"/>
        </id> 
        
        <many-to-one name="objectType" column="r_object_type_id" 
		             class="edu.emory.library.tas.attrGroups.ObjectType" 
					 unique="true" lazy="false"/>

    	<property name="name" column="name"/>
    	<property name="userLabel" column="user_label"/>
 		<property name="type" column="type"/>
		<property name="dictionary" column="dictionary"/>
		<property name="description" column="description"/>				
		<property name="length" column="length"/>

		<set name="groups" table="group_compound_attributes" lazy="false" inverse="true">
        	<key column="r_compound_attribute_id"/>
        	<many-to-many column="r_group_id" class="edu.emory.library.tas.attrGroups.Group"/>
    	</set>

		<set name="attributes" table="compound_attribute_attributes" lazy="false">
			<cache usage="read-write"/>
        	<key column="r_compound_attribute_id"/>
        	<many-to-many column="r_attribute_id" class="edu.emory.library.tas.attrGroups.Attribute"/>
    	</set>
	</class>

	<class name="edu.emory.library.tas.attrGroups.Group" table="groups">
		<cache usage="read-write" />
        <id name="id" column="iid">
        	<generator class="native"/>
        </id>                       
        <many-to-one name="objectType" column="r_object_type_id" 
		             class="edu.emory.library.tas.attrGroups.ObjectType" 
					 unique="true" lazy="false"/>
			
				
    	<property name="name" column="name"/>
    	<property name="userLabel" column="user_label"/>
		<property name="description" column="description"/>	
		
		<set name="compoundAttributes" table="group_compound_attributes" lazy="false">
			<cache usage="read-write"/>
        	<key column="r_group_id"/>
        	<many-to-many column="r_compound_attribute_id" class="edu.emory.library.tas.attrGroups.CompoundAttribute"/>
    	</set>
    	
		<set name="attributes" table="group_attributes" lazy="false">
			<cache usage="read-write"/>
        	<key column="r_group_id"/>
        	<many-to-many column="r_attribute_id" class="edu.emory.library.tas.attrGroups.Attribute"/>
    	</set>
	</class>

	<class name="edu.emory.library.tas.attrGroups.ObjectType" table="object_types">
		<cache usage="read-write" />
        <id name="id" column="iid">
        	<generator class="native"/>
        </id>                       
		<property name="typeName" column="name"/>
	</class>
	
</hibernate-mapping>